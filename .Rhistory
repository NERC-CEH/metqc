scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~day)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(month,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(day,hour,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(month,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
yday = day(DATECT),
hour = hour(DATECT),
minute = minute(DATECT)) %>%
select(year,month,day,hour,minute)
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
day = yday(DATECT),
hour = hour(DATECT),
minute = minute(DATECT)) %>%
select(year,month,day,hour,minute)
test
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
day = day(DATECT),
hour = hour(DATECT),
minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,day,hour,minute)
test
?wday
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
day = day(DATECT),
hour = hour(DATECT),
minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,day,hour,minute)
test
library(lubridate)
dbuid <- "BU_FIELD_SITES"
dbpwd <- "0ig2mtYUL9"
drv <- dbDriver("Oracle")
con <- dbConnect(drv, dbname = "budbase.nerc-bush.ac.uk/BUA",
username = dbuid,
password = dbpwd)
table_name <- "MET_30MIN"
dbNames <<- dbListFields(con, table_name)
dbNamesForBox <- dbNames[!dbNames %in% c("DATECT","TIMESTAMP","DATECT_NUM","checked","pred")]
qry_variables <- "TS"
date1 <- '2017/01/01 00:00'
date2 <- '2017/07/18 05:20'
qry <- paste0("SELECT DATECT, TIMESTAMP, ",qry_variables," FROM ", table_name,
" WHERE DATECT > TO_DATE('", date1, "', 'yyyy/mm/dd hh24:mi')
AND DATECT < TO_DATE('", date2, "', 'yyyy/mm/dd hh24:mi')")
df_qry <<- dbGetQuery(con, qry)
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
day = day(DATECT),
hour = hour(DATECT),
minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,day,hour,minute)
test$variable <- qry_variables
test$has_been_checked <- FALSE
test
ggplot(test,aes(month,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
sessionInfo()
mday()
mday('03/12/2021')
yday('03/12/2021')
test <- df_qry %>%
mutate(#year = year(DATECT),
# month = month(DATECT),
# day = day(DATECT),
# hour = hour(DATECT),
minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,day,hour,minute)
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
day = day(DATECT),
hour = hour(DATECT),
minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,day,hour,minute,day_of_the_week, day_of_the_month,day_of_the_year)
test$variable <- qry_variables
test$has_been_checked <- FALSE
test
ggplot(test,aes(month,day_of_the_week,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day_of_the_week,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day_of_the_year,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day_of_the_month,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day_of_the_week,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
test
test <- df_qry %>%
mutate(year = year(DATECT),
#month = month(DATECT),
#day = day(DATECT),
#hour = hour(DATECT),
#minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,#month,day,hour,minute,
day_of_the_week, day_of_the_month,day_of_the_year)
test
ggplot(test,aes(year,day_of_the_week,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
#day = day(DATECT),
#hour = hour(DATECT),
#minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,#day,hour,minute,
day_of_the_week, day_of_the_month,day_of_the_year)
test$variable <- qry_variables
test$has_been_checked <- FALSE
ggplot(test,aes(year,day_of_the_week,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
test
library(lubridate)
dbuid <- "BU_FIELD_SITES"
dbpwd <- "0ig2mtYUL9"
drv <- dbDriver("Oracle")
con <- dbConnect(drv, dbname = "budbase.nerc-bush.ac.uk/BUA",
username = dbuid,
password = dbpwd)
table_name <- "MET_30MIN"
dbNames <<- dbListFields(con, table_name)
dbNamesForBox <- dbNames[!dbNames %in% c("DATECT","TIMESTAMP","DATECT_NUM","checked","pred")]
qry_variables <- "TS"
date1 <- '2017/01/01 00:00'
date2 <- '2017/12/18 05:20'
qry <- paste0("SELECT DATECT, TIMESTAMP, ",qry_variables," FROM ", table_name,
" WHERE DATECT > TO_DATE('", date1, "', 'yyyy/mm/dd hh24:mi')
AND DATECT < TO_DATE('", date2, "', 'yyyy/mm/dd hh24:mi')")
df_qry <<- dbGetQuery(con, qry)
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
#day = day(DATECT),
#hour = hour(DATECT),
#minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,#day,hour,minute,
day_of_the_week, day_of_the_month,day_of_the_year)
test$variable <- qry_variables
test$has_been_checked <- FALSE
test$month <- factor(month, levels == as.character(1:12))
test
class(test$month)
test$month <- factor(test$month, levels == as.character(1:12))
test$month <- factor(test$month)
test
ggplot(test,aes(month,day_of_the_week,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
library(lubridate)
dbuid <- "BU_FIELD_SITES"
dbpwd <- "0ig2mtYUL9"
drv <- dbDriver("Oracle")
con <- dbConnect(drv, dbname = "budbase.nerc-bush.ac.uk/BUA",
username = dbuid,
password = dbpwd)
table_name <- "MET_30MIN"
dbNames <<- dbListFields(con, table_name)
dbNamesForBox <- dbNames[!dbNames %in% c("DATECT","TIMESTAMP","DATECT_NUM","checked","pred")]
qry_variables <- "TS"
date1 <- '2017/01/01 00:00'
date2 <- '2017/12/18 05:20'
qry <- paste0("SELECT DATECT, TIMESTAMP, ",qry_variables," FROM ", table_name,
" WHERE DATECT > TO_DATE('", date1, "', 'yyyy/mm/dd hh24:mi')
AND DATECT < TO_DATE('", date2, "', 'yyyy/mm/dd hh24:mi')")
df_qry <<- dbGetQuery(con, qry)
test <- df_qry %>%
mutate(year = year(DATECT),
month = month(DATECT),
day = day(DATECT),
hour = hour(DATECT),
minute = minute(DATECT),
day_of_the_week = wday(DATECT),
day_of_the_month = mday(DATECT),
day_of_the_year = yday(DATECT)) %>%
select(year,month,day,hour,minute,
day_of_the_week, day_of_the_month,day_of_the_year)
test$variable <- qry_variables
test$has_been_checked <- FALSE
class(test$month)
test$month <- factor(test$month)
ggplot(test,aes(year,day,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
ggplot(test,aes(year,day_of_the_week,fill = has_been_checked))+
geom_tile(color= "white",size=0.1) +
#scale_fill_viridis(name="Hrly Temps C",option ="C")+
facet_grid(year~month)+
scale_y_reverse()+
scale_x_discrete()+
theme_minimal(base_size = 8)+
theme(legend.position = "bottom")+
theme(plot.title=element_text(size = 14))+
theme(axis.text.y=element_text(size=6)) +
theme(strip.background = element_rect(colour="white"))+
theme(plot.title=element_text(hjust=0))+
theme(axis.ticks=element_blank())+
theme(axis.text=element_text(size=7))+
theme(legend.title=element_text(size=8))+
theme(legend.text=element_text(size=6))+
removeGrid()
?frame_calendar
install.packages(calendR)
install.packages("calendR")
